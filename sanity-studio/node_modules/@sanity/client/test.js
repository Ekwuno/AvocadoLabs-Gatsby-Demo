const sanityClient = require('./')

const TIMEOUT_MS = 30000
const client = sanityClient({
  projectId: 'abc123',
  dataset: 'foo',
  timeout: TIMEOUT_MS,
  useCdn: true
})

function doQuery(query, params, options) {
  return Promise.race([
    client.fetch(query, params, options),
    new Promise((resolve, reject) => setTimeout(reject, TIMEOUT_MS, new Error('Timed out')))
  ])
}

doQuery('*[0]')
  .then(res => console.log(res))
  .catch(err => console.error(err))
